# S3 Web UI (AWS / Yandex Object Storage)

github: https://github.com/Kohinor46/s3_web_ui/tree/main

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (AWS S3, Yandex Object Storage –∏ –¥—Ä.). –õ—ë–≥–∫–∏–π –æ–¥–∏–Ω–æ—á–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–∞ Go + –æ–¥–∏–Ω HTML-—à–∞–±–ª–æ–Ω. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è self-hosted –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã.

Demo: —Å–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤, –±—ã—Å—Ç—Ä—ã–π —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
	‚Ä¢	üîé –ë—ã—Å—Ç—Ä—ã–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
	‚Ä¢	üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ ¬´–ø–∞–ø–∫–∞–º¬ª (–ø—Ä–µ—Ñ–∏–∫—Å–∞–º)
	‚Ä¢	‚¨áÔ∏è –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ—Ç–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ S3
	‚Ä¢	üß∞ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å AWS S3 –∏ Yandex Object Storage (–∏ –ª—é–±—ã–º–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ API)
	‚Ä¢	üê≥ –ì–æ—Ç–æ–≤ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (Docker/OCI)
	‚Ä¢	‚öôÔ∏è –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è/—Ñ–ª–∞–≥–∏

‚∏ª

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Go)
./main.go  -s3_user="" -s3_addr="" -s3_bucket="" -s3_pass=""

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080/

‚∏ª

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–¥–æ–±–Ω–æ –¥–ª—è Docker) –∏/–∏–ª–∏ —Ñ–ª–∞–≥–∏. –ù–∏–∂–µ - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–º–µ–Ω–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è:

–ü–∞—Ä–∞–º–µ—Ç—Ä	Env	–§–ª–∞–≥	–û–ø–∏—Å–∞–Ω–∏–µ
Endpoint	s3_addr	-endpoint	–ë–∞–∑–æ–≤—ã–π S3-—ç–Ω–¥–ø–æ–∏–Ω—Ç. AWS: https://s3.amazonaws.com, Yandex: https://storage.yandexcloud.net
Access Key	s3_user	‚Äî	–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞
Secret Key	s3_pass	‚Äî	–°–µ–∫—Ä–µ—Ç
Bucket	s3_bucket	-bucket	–ò–º—è –±–∞–∫–µ—Ç–∞

‚∏ª

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞

AWS S3

export s3_user=AKIA...
export s3_pass=...
export s3_bucket=my-bucket

./main.go -s3_addr="https://s3.amazonaws.com" -s3_bucket="$S3_BUCKET"

Yandex Object Storage

export s3_user=YCAJ...
export s3_pass=...
export s3_addr=https://storage.yandexcloud.net
export s3_bucket=my-bucket

./s3-web-ui -endpoint="$s3_addr" -bucket="$s3_bucket"


‚∏ª

Docker

–ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞

docker run --rm -p 8080:8080 \
	-e s3_user="" 
	-e s3_addr="" 
	-e s3_bucket="" 
	-e s3_pass=""
  kohinor46/s3_web_ui:latest

Docker Compose

services:
  s3-web-ui:
    image: kohinor46/s3_web_ui:latest
    ports:
      - "8080:8080"
    environment:
    	s3_user="" 
	s3_addr="" 
	s3_bucket="" 
	s3_pass=""


‚∏ª

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
	‚Ä¢	GET / ‚Äî –ª–∏—Å—Ç–∏–Ω–≥ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ (–ø–∞–ø–∫–∏)
	‚Ä¢	GET /<subfolder>/ ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ ¬´–ø–∞–ø–∫–∞–º¬ª
	‚Ä¢	GET /?<base64encoded-key> ‚Äî –æ—Ç–¥–∞—á–∞ —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–∏–º–æ–º)
	‚Ä¢	GET /favicon.ico ‚Äî –∏–∫–æ–Ω–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π s3.png, –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω)

‚∏ª

–ó–∞—â–∏—Ç–∞ –∏ –¥–æ—Å—Ç—É–ø

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
	‚Ä¢	–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ IP/VPN; –∏–ª–∏
	‚Ä¢	–ø–æ–≤–µ—Å–∏—Ç—å Basic Auth/SSO –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (nginx/traefik); –∏–ª–∏
	‚Ä¢	–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞ API-—à–ª—é–∑–æ–º –∫–æ–º–ø–∞–Ω–∏–∏.

‚∏ª

–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

SignatureDoesNotMatch
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏–æ–Ω (AWS_REGION) –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç (s3_addr).
	‚Ä¢	–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ (NTP).
	‚Ä¢	–î–ª—è Yandex Object Storage –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ path-style URL (–æ–±—ã—á–Ω–æ SDK —Å–∞–º —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è).
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–º—è –±–∞–∫–µ—Ç–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª—ç—à–µ–π/–ø—Ä–æ–±–µ–ª–æ–≤.

AccessDenied
	‚Ä¢	–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–ª—é—á–µ–π –µ—Å—Ç—å –ø—Ä–∞–≤–∞ s3:ListBucket –∏ s3:GetObject –∫–∞–∫ –º–∏–Ω–∏–º—É–º.
	‚Ä¢	–î–ª—è –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –¥–æ–±–∞–≤—å—Ç–µ —É—Å–ª–æ–≤–∏–µ s3:prefix.

–ü—Ä–æ–∫—Å–∏
	‚Ä¢	–ó–∞–¥–∞–π—Ç–µ HTTP_PROXY/HTTPS_PROXY –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö HTTP(S) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ S3.

‚∏ª

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

go run ./s3_web_ui.go \
  -s3_user="" -s3_addr="" -s3_bucket="" -s3_pass=""

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —à–∞–±–ª–æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ index.gohtml. –í –Ω—ë–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:
	‚Ä¢	—Ä–µ—Å–ø–æ–Ω—Å–∏–≤-–≤–µ—Ä—Å—Ç–∫–∞,
	‚Ä¢	—Å–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è —Ç–∞–±–ª–∏—Ü–∞,
	‚Ä¢	–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ (–±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É).

‚∏ª

–õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ. –°–º. —Ñ–∞–π–ª LICENSE.

‚∏ª

–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
	‚Ä¢	AWS SDK for Go
	‚Ä¢	–í—Å–µ–º, –∫—Ç–æ –¥–µ–ª–∞–µ—Ç S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —É–¥–æ–±–Ω–µ–µ ‚ú®
